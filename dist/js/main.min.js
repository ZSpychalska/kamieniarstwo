var imgSrc,imgAlt,observer,observer2,burgerBtnOpen=document.querySelector(".burger-btn"),burgerBtnClose=document.querySelector(".burger-btn-close"),mobileNav=document.querySelector(".mobile-nav"),mobileNavBox=document.querySelector(".mobile-nav__box"),mobileNavItems=document.querySelectorAll(".mobile-nav__element"),dateElements=document.querySelectorAll(".date"),desktopNav=document.querySelector(".desktop-nav"),logoAll=document.querySelectorAll(".logo"),boxCountElement=document.querySelector(".about-us__info"),countElement=document.querySelector(".about-us__infoText-number"),boxAboutUs=document.querySelectorAll(".about-us__box"),boxesAboutUs=document.querySelector(".about-us__boxes"),allSections=document.querySelectorAll(".section"),allNavMobileElements=document.querySelectorAll(".mobile-nav__element"),allNavDesktopElements=document.querySelectorAll(".desktop-nav__element"),mainHeader=document.querySelector(".main-header"),galleryAllImg=document.querySelectorAll(".gallery__img"),galleryAreaSelected=document.querySelector(".gallery-selected"),galleryBtnClose=document.querySelector(".gallery-selected-btn"),galleryBtnLeft=document.querySelector(".gallery-selected__slideBtn__left"),galleryBtnRight=document.querySelector(".gallery-selected__slideBtn__right"),galleryHTML=document.querySelector(".galleryHTML"),optionsCounter={rootMargin:"-100px"},optionsAboutUs={rootMargin:"-50px"},NavColorAdd=function(){100<=window.scrollY?(desktopNav.classList.add("nav-color"),mobileNavBox.classList.add("nav-color")):(desktopNav.classList.remove("nav-color"),mobileNavBox.classList.remove("nav-color"))},logoClick=function(){window.location.replace("index.html")},handleMobileNav=function(){mobileNav.classList.toggle("mobile-nav--active")},clickOutsideNav=function(e){e.target.classList.contains("burger-btn__box")||e.target.classList.contains("burger-btn")||e.target.classList.contains("mobile-nav__element")||e.target.classList.contains("mobile-nav")||e.target.classList.contains("burger-btn-close")||mobileNav.classList.contains("mobile-nav--active")&&mobileNav.classList.remove("mobile-nav--active")},handleCurrentYear=(mobileNavItems.forEach(function(e){e.addEventListener("click",function(){setTimeout(function(){handleMobileNav()},275)})}),function(){var t=(new Date).getFullYear();dateElements.forEach(function(e){e.textContent=t})}),startCounter=function(e){var l;e[0].isIntersecting&&(l=function(){var e=countElement.getAttribute("data-number"),t=parseInt(countElement.textContent);t<e?(countElement.textContent="".concat(Math.floor(t+e/30)),setTimeout(l,40)):countElement.textContent=e})()},startAnimationBox=function(e){e[0].isIntersecting&&boxAboutUs.forEach(function(e){e.classList.add("about-us__box--show")})},removeClassNav=function(){allNavMobileElements.forEach(function(e){e.classList.remove("mobile-nav__element--active")}),allNavDesktopElements.forEach(function(e){e.classList.remove("desktop-nav__element--active")})},observSections=function(){sections=[],allSections.forEach(function(e){window.scrollY<=e.offsetTop+e.offsetHeight-100&&(sections.push(e),e="offersAdditional"==sections[0].id?document.querySelectorAll('[href*="offers"]'):document.querySelectorAll('[href*="'.concat(sections[0].id,'"]')),removeClassNav(),e[0].classList.add("mobile-nav__element--active"),e[1].classList.add("desktop-nav__element--active"))}),window.scrollY<=mainHeader.offsetTop+mainHeader.offsetHeight-100&&removeClassNav()},openGalleryArea=function(e){imgSrc=e.target.getAttribute("src"),imgAlt=e.target.getAttribute("alt");function t(){var t=0;galleryAllImg.forEach(function(e){e.getAttribute("src")===imgSrc?(imgAlt=(t>=galleryAllImg.length-1?(imgSrc=galleryAllImg[0].getAttribute("src"),galleryAllImg[0]):(imgSrc=galleryAllImg[t+1].getAttribute("src"),galleryAllImg[t+1])).getAttribute("alt"),o.setAttribute("src",imgSrc),o.setAttribute("alt",imgAlt)):t++})}function l(){var t=0;galleryAllImg.forEach(function(e){if(e.getAttribute("src")===imgSrc){if(0==t)return imgSrc=galleryAllImg[galleryAllImg.length-1].getAttribute("src"),imgAlt=galleryAllImg[galleryAllImg.length-1].getAttribute("alt"),o.setAttribute("src",imgSrc),o.setAttribute("alt",imgAlt),void(t=-1e3);if(0<t)return imgSrc=galleryAllImg[t-1].getAttribute("src"),imgAlt=galleryAllImg[t-1].getAttribute("alt"),o.setAttribute("src",imgSrc),void o.setAttribute("alt",imgAlt)}t++})}var o=document.createElement("img");o.setAttribute("src",imgSrc),o.setAttribute("alt",imgAlt),o.classList.add("gallery-selected__img"),galleryAreaSelected.appendChild(o),galleryAreaSelected.style.top=window.scrollY+"px",galleryAreaSelected.style.display="flex",galleryHTML.style.overflowY="hidden";galleryBtnRight.addEventListener("click",t),galleryBtnLeft.addEventListener("click",l),galleryBtnClose.addEventListener("click",closeGalleryArea),window.addEventListener("keyup",function(e){"ArrowRight"==e.key?t():"ArrowLeft"==e.key?l():"Escape"==e.key&&closeGalleryArea()})},closeGalleryArea=function(){galleryAreaSelected.style.display="none",galleryHTML.style.overflowY="scroll",galleryAreaSelected.removeChild(imgOpen)};handleCurrentYear(),galleryAllImg.forEach(function(e){e.addEventListener("click",openGalleryArea)}),logoAll.forEach(function(e){e.addEventListener("click",logoClick)}),burgerBtnOpen.addEventListener("click",handleMobileNav),burgerBtnClose.addEventListener("click",handleMobileNav),window.addEventListener("click",clickOutsideNav),window.addEventListener("scroll",NavColorAdd),document.body.classList.contains("main-page")&&((observer=new IntersectionObserver(startCounter,optionsCounter)).observe(boxCountElement),(observer2=new IntersectionObserver(startAnimationBox,optionsAboutUs)).observe(boxesAboutUs),window.addEventListener("scroll",observSections));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsib3B0aW9uc0Fib3V0VXMiLCJyb290TWFyZ2luIiwib2JzZXJ2ZXIiLCJvYnNlcnZlcjIiLCJidXJnZXJCdG5PcGVuIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYnVyZ2VyQnRuQ2xvc2UiLCJtb2JpbGVOYXYiLCJtb2JpbGVOYXZCb3giLCJkYXRlRWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZGVza3RvcE5hdiIsImJveENvdW50RWxlbWVudCIsImNvdW50RWxlbWVudCIsImJveGVzQWJvdXRVcyIsImFsbFNlY3Rpb25zIiwiYWxsTmF2RGVza3RvcEVsZW1lbnRzIiwibWFpbkhlYWRlciIsImdhbGxlcnlBbGxJbWciLCJnYWxsZXJ5QnRuQ2xvc2UiLCJnYWxsZXJ5QnRuUmlnaHQiLCJnYWxsZXJ5SFRNTCIsImltZ1NyYyIsImltZ0FsdCIsIm9wdGlvbnNDb3VudGVyIiwiTmF2Q29sb3JBZGQiLCJzY3JvbGxZIiwiY2xhc3NMaXN0IiwibG9nb0NsaWNrIiwid2luZG93IiwibG9jYXRpb24iLCJhZGQiLCJoYW5kbGVNb2JpbGVOYXYiLCJyZW1vdmUiLCJjbGlja091dHNpZGVOYXYiLCJ0b2dnbGUiLCJzZXRUaW1lb3V0IiwiZSIsInRhcmdldCIsImNvbnRhaW5zIiwiaGFuZGxlQ3VycmVudFllYXIiLCJkYXRlIiwiRGF0ZSIsImdldEZ1bGxZZWFyIiwic3RhcnRDb3VudGVyIiwic3RhcnRBbmltYXRpb25Cb3giLCJtb2JpbGVOYXZJdGVtcyIsInRleHRDb250ZW50IiwiaXRlbSIsInVwZGF0ZUNvdW50ZXIiLCJlbnRyeSIsImlzSW50ZXJzZWN0aW5nIiwiZmluYWxOdW1iZXIiLCJnZXRBdHRyaWJ1dGUiLCJ2YWx1ZSIsInBhcnNlSW50Iiwib2JzZXJ2U2VjdGlvbnMiLCJwdXNoIiwic2VjdGlvbiIsImFjdGl2ZVNlY3Rpb24iLCJjb25jYXQiLCJNYXRoIiwiZmxvb3IiLCJzZWN0aW9ucyIsIm9wZW5HYWxsZXJ5QXJlYSIsImZvckVhY2giLCJib3giLCJpbWdPcGVuIiwiZ2FsbGVyeUFyZWFTZWxlY3RlZCIsImFwcGVuZENoaWxkIiwib3ZlcmZsb3dZIiwibmV4dFBob3RvR2FsbGVyeSIsInNldEF0dHJpYnV0ZSIsIm9mZnNldFRvcCIsIm9mZnNldEhlaWdodCIsImlkIiwicmVtb3ZlQ2xhc3NOYXYiLCJwcmV2aW91c1Bob3RvR2FsbGVyeSIsImxlbmd0aCIsImNsb3NlR2FsbGVyeUFyZWEiLCJpIiwiaW1nIiwic3R5bGUiLCJhZGRFdmVudExpc3RlbmVyIiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJjcmVhdGVFbGVtZW50IiwidG9wIiwiZGlzcGxheSIsImtleSIsImdhbGxlcnlCdG5MZWZ0IiwicmVtb3ZlQ2hpbGQiLCJsb2dvQWxsIiwibG9nbyIsImJvZHkiLCJvYnNlcnZlIl0sIm1hcHBpbmdzIjoiQUFBQSxJQW9DTUEsT0FDRkMsT0FtUU1DLFNBR0FDLFVBM1NKQyxjQUFnQkMsU0FBU0MsY0FBYyxhQUFhLEVBQ3BEQyxlQUFpQkYsU0FBU0MsY0FBYyxtQkFBbUIsRUFEM0RGLFVBQWFDLFNBQUdBLGNBQVNDLGFBQWMsRUFDdkNDLGFBQWlCRixTQUFTQyxjQUFjLGtCQUFBLEVBQ3hDRSxlQUFZSCxTQUFTQyxpQkFBYyxzQkFBYyxFQUNqREcsYUFBZUosU0FBU0MsaUJBQWMsT0FBQSxFQUV0Q0ksV0FBZUwsU0FBU00sY0FBQUEsY0FBeUIsRUFFakRDLFFBQVVQLFNBQVdNLGlCQUFlLE9BQUEsRUFHcENFLGdCQUFrQlIsU0FBU0MsY0FBYyxpQkFBa0IsRUFDM0RRLGFBQWVULFNBQVNDLGNBQWMsNEJBQTZCLEVBR25FUyxXQUFlVixTQUFTQyxpQkFBYyxnQkFBbUIsRUFFekRVLGFBQWNYLFNBQVNNLGNBQWlCLGtCQUFXLEVBRW5ETSxZQUFBQSxTQUF3QlosaUJBQVNNLFVBQWlCLEVBRWxETyxxQkFBc0JaLFNBQUFBLGlCQUE2QixzQkFBQSxFQUVuRGEsc0JBQXlCUixTQUFBQSxpQkFBaUIsdUJBQWdCLEVB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QkFBaUIsUUFBU25CLGVBQWUsQ0FDakQsQ0FBQyxFQUVEMkIsUUFBUTFCLFFBQVEsU0FBQTJCLEdBQ1pBLEVBQUtULGlCQUFpQixRQUFTdkQsU0FBUyxDQUM1QyxDQUFDLEVBRUR6QixjQUFjZ0YsaUJBQWlCLFFBQVNuRCxlQUFlLEVBQ3ZEMUIsZUFBZTZFLGlCQUFpQixRQUFTbkQsZUFBZSxFQUV4REgsT0FBT3NELGlCQUFpQixRQUFTakQsZUFBZSxFQUNoREwsT0FBT3NELGlCQUFpQixTQUFVMUQsV0FBVyxFQUUxQ3JCLFNBQVN5RixLQUFLbEUsVUFBVVksU0FBUyxXQUFXLEtBRXJDdEMsU0FBVyxJQUFJbUYscUJBQXFCeEMsYUFBY3BCLGNBQWMsR0FDN0RzRSxRQUFRbEYsZUFBZSxHQUUxQlYsVUFBWSxJQUFJa0YscUJBQXFCdkMsa0JBQW1COUMsY0FBYyxHQUNsRStGLFFBQVFoRixZQUFZLEVBRTlCZSxPQUFPc0QsaUJBQWlCLFNBQVUzQixjQUFjIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYnVyZ2VyQnRuT3BlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXJnZXItYnRuJyk7XHJcbmNvbnN0IGJ1cmdlckJ0bkNsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1cmdlci1idG4tY2xvc2UnKTtcclxuY29uc3QgbW9iaWxlTmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vYmlsZS1uYXYnKTtcclxuY29uc3QgbW9iaWxlTmF2Qm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vYmlsZS1uYXZfX2JveCcpO1xyXG5jb25zdCBtb2JpbGVOYXZJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2JpbGUtbmF2X19lbGVtZW50Jyk7XHJcbmNvbnN0IGRhdGVFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYXRlJyk7XHJcblxyXG5jb25zdCBkZXNrdG9wTmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRlc2t0b3AtbmF2Jyk7XHJcbmNvbnN0IGxvZ29BbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubG9nbycpO1xyXG5cclxuY29uc3QgYm94Q291bnRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFib3V0LXVzX19pbmZvJyk7XHJcbmNvbnN0IGNvdW50RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hYm91dC11c19faW5mb1RleHQtbnVtYmVyJyk7XHJcblxyXG5jb25zdCBib3hBYm91dFVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFib3V0LXVzX19ib3gnKTtcclxuY29uc3QgYm94ZXNBYm91dFVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFib3V0LXVzX19ib3hlcycpO1xyXG5cclxuY29uc3QgYWxsU2VjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VjdGlvbicpO1xyXG5jb25zdCBhbGxOYXZNb2JpbGVFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2JpbGUtbmF2X19lbGVtZW50Jyk7XHJcbmNvbnN0IGFsbE5hdkRlc2t0b3BFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kZXNrdG9wLW5hdl9fZWxlbWVudCcpO1xyXG5cclxuY29uc3QgbWFpbkhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLWhlYWRlcicpO1xyXG5cclxuY29uc3QgZ2FsbGVyeUFsbEltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5nYWxsZXJ5X19pbWcnKTtcclxuY29uc3QgZ2FsbGVyeUFyZWFTZWxlY3RlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5LXNlbGVjdGVkJyk7XHJcbmNvbnN0IGdhbGxlcnlCdG5DbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5LXNlbGVjdGVkLWJ0bicpO1xyXG5jb25zdCBnYWxsZXJ5QnRuTGVmdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5LXNlbGVjdGVkX19zbGlkZUJ0bl9fbGVmdCcpO1xyXG5jb25zdCBnYWxsZXJ5QnRuUmlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FsbGVyeS1zZWxlY3RlZF9fc2xpZGVCdG5fX3JpZ2h0Jyk7XHJcbmNvbnN0IGdhbGxlcnlIVE1MID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnlIVE1MJyk7XHJcblxyXG5sZXQgaW1nU3JjO1xyXG5sZXQgaW1nQWx0O1xyXG5cclxuY29uc3Qgb3B0aW9uc0NvdW50ZXIgPSB7XHJcbiAgICByb290TWFyZ2luOiAnLTEwMHB4J1xyXG59XHJcblxyXG5jb25zdCBvcHRpb25zQWJvdXRVcyA9IHtcclxuICAgIHJvb3RNYXJnaW46ICctNTBweCdcclxufVxyXG5cclxuXHJcbmNvbnN0IE5hdkNvbG9yQWRkID0gKCkgPT4ge1xyXG4gICAgaWYod2luZG93LnNjcm9sbFkgPj0gMTAwKXtcclxuICAgICAgICBkZXNrdG9wTmF2LmNsYXNzTGlzdC5hZGQoJ25hdi1jb2xvcicpO1xyXG4gICAgICAgIG1vYmlsZU5hdkJveC5jbGFzc0xpc3QuYWRkKCduYXYtY29sb3InKTtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIGRlc2t0b3BOYXYuY2xhc3NMaXN0LnJlbW92ZSgnbmF2LWNvbG9yJyk7XHJcbiAgICAgICAgbW9iaWxlTmF2Qm94LmNsYXNzTGlzdC5yZW1vdmUoJ25hdi1jb2xvcicpO1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBsb2dvQ2xpY2sgPSAoKSA9PiB7XHJcbiAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShcImluZGV4Lmh0bWxcIik7XHJcbn1cclxuXHJcbmNvbnN0IGhhbmRsZU1vYmlsZU5hdiA9ICgpID0+IHtcclxuICAgIG1vYmlsZU5hdi5jbGFzc0xpc3QudG9nZ2xlKCdtb2JpbGUtbmF2LS1hY3RpdmUnKTtcclxufVxyXG5cclxuXHJcbmNvbnN0IGNsaWNrT3V0c2lkZU5hdiA9IChlKSA9PiB7XHJcbiAgICBpZihcclxuICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2J1cmdlci1idG5fX2JveCcpIHx8XHJcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdidXJnZXItYnRuJykgfHxcclxuICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vYmlsZS1uYXZfX2VsZW1lbnQnKSB8fFxyXG4gICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9iaWxlLW5hdicpIHx8XHJcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdidXJnZXItYnRuLWNsb3NlJylcclxuICAgICl7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgaWYobW9iaWxlTmF2LmNsYXNzTGlzdC5jb250YWlucygnbW9iaWxlLW5hdi0tYWN0aXZlJykpe1xyXG4gICAgICAgICAgICBtb2JpbGVOYXYuY2xhc3NMaXN0LnJlbW92ZSgnbW9iaWxlLW5hdi0tYWN0aXZlJyk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5tb2JpbGVOYXZJdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBoYW5kbGVNb2JpbGVOYXYoKTtcclxuICAgICAgICB9LCAyNzUpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuXHJcbmNvbnN0IGhhbmRsZUN1cnJlbnRZZWFyID0gKCkgPT4ge1xyXG4gICAgY29uc3QgZGF0ZSA9IChuZXcgRGF0ZSgpKS5nZXRGdWxsWWVhcigpO1xyXG5cclxuICAgIGRhdGVFbGVtZW50cy5mb3JFYWNoKGUgPT4ge1xyXG4gICAgICAgIGUudGV4dENvbnRlbnQgPSBkYXRlO1xyXG4gICAgfSk7XHJcblxyXG59XHJcblxyXG5jb25zdCBzdGFydENvdW50ZXIgPSAoZW50cnkpID0+IHtcclxuICAgIC8vIGNvbnNvbGUubG9nKGVudHJ5WzBdLmlzSW50ZXJzZWN0aW5nKTtcclxuXHJcbiAgICBpZihlbnRyeVswXS5pc0ludGVyc2VjdGluZyl7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlQ291bnRlciA9ICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZmluYWxOdW1iZXIgPSBjb3VudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLW51bWJlcicpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhcnNlSW50KGNvdW50RWxlbWVudC50ZXh0Q29udGVudCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzcGVlZCA9IGZpbmFsTnVtYmVyIC8gMzA7XHJcblxyXG4gICAgICAgICAgICBpZih2YWx1ZSA8IGZpbmFsTnVtYmVyKXtcclxuICAgICAgICAgICAgICAgIGNvdW50RWxlbWVudC50ZXh0Q29udGVudCA9IGAke01hdGguZmxvb3IodmFsdWUgKyBzcGVlZCl9YDtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQodXBkYXRlQ291bnRlciwgNDApO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGNvdW50RWxlbWVudC50ZXh0Q29udGVudCA9IGZpbmFsTnVtYmVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB1cGRhdGVDb3VudGVyKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IHN0YXJ0QW5pbWF0aW9uQm94ID0gKGVudHJ5KSA9PiB7XHJcblxyXG4gICAgaWYoZW50cnlbMF0uaXNJbnRlcnNlY3Rpbmcpe1xyXG5cclxuICAgICAgICBib3hBYm91dFVzLmZvckVhY2goYm94ID0+IHtcclxuICAgICAgICAgICAgYm94LmNsYXNzTGlzdC5hZGQoJ2Fib3V0LXVzX19ib3gtLXNob3cnKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgcmVtb3ZlQ2xhc3NOYXYgPSAoKSA9PiB7XHJcbiAgICBhbGxOYXZNb2JpbGVFbGVtZW50cy5mb3JFYWNoKGUgPT4ge1xyXG4gICAgICAgIGUuY2xhc3NMaXN0LnJlbW92ZSgnbW9iaWxlLW5hdl9fZWxlbWVudC0tYWN0aXZlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBhbGxOYXZEZXNrdG9wRWxlbWVudHMuZm9yRWFjaChlID0+IHtcclxuICAgICAgICBlLmNsYXNzTGlzdC5yZW1vdmUoJ2Rlc2t0b3AtbmF2X19lbGVtZW50LS1hY3RpdmUnKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5jb25zdCBvYnNlcnZTZWN0aW9ucyA9ICgpID0+IHtcclxuXHJcbiAgICBzZWN0aW9ucyA9IFtdXHJcblxyXG4gICAgYWxsU2VjdGlvbnMuZm9yRWFjaChzZWN0aW9uID0+IHtcclxuICAgICAgICBpZih3aW5kb3cuc2Nyb2xsWSA8PSBzZWN0aW9uLm9mZnNldFRvcCArIHNlY3Rpb24ub2Zmc2V0SGVpZ2h0IC0gMTAwKXtcclxuICAgICAgICAgICAgc2VjdGlvbnMucHVzaChzZWN0aW9uKTtcclxuICAgICAgICAgICAgbGV0IGFjdGl2ZVNlY3Rpb247XHJcblxyXG4gICAgICAgICAgICBpZihzZWN0aW9uc1swXS5pZCA9PSAnb2ZmZXJzQWRkaXRpb25hbCcpe1xyXG4gICAgICAgICAgICAgICAgYWN0aXZlU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYFtocmVmKj1cIm9mZmVyc1wiXWApO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGFjdGl2ZVNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGBbaHJlZio9XCIke3NlY3Rpb25zWzBdLmlkfVwiXWApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZW1vdmVDbGFzc05hdigpO1xyXG5cclxuICAgICAgICAgICAgYWN0aXZlU2VjdGlvblswXS5jbGFzc0xpc3QuYWRkKCdtb2JpbGUtbmF2X19lbGVtZW50LS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgYWN0aXZlU2VjdGlvblsxXS5jbGFzc0xpc3QuYWRkKCdkZXNrdG9wLW5hdl9fZWxlbWVudC0tYWN0aXZlJyk7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmKHdpbmRvdy5zY3JvbGxZICA8PSBtYWluSGVhZGVyLm9mZnNldFRvcCArIG1haW5IZWFkZXIub2Zmc2V0SGVpZ2h0IC0gMTAwKXtcclxuXHJcbiAgICAgICAgcmVtb3ZlQ2xhc3NOYXYoKTtcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IG9wZW5HYWxsZXJ5QXJlYSA9IChlKSA9PiB7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhlLnRhcmdldCk7XHJcbiAgICBpbWdTcmMgPSAoZS50YXJnZXQpLmdldEF0dHJpYnV0ZSgnc3JjJyk7XHJcbiAgICBpbWdBbHQgPSAoZS50YXJnZXQpLmdldEF0dHJpYnV0ZSgnYWx0Jyk7XHJcblxyXG4gICAgY29uc3QgaW1nT3BlbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG5cclxuICAgIGltZ09wZW4uc2V0QXR0cmlidXRlKCdzcmMnLCBpbWdTcmMpO1xyXG4gICAgaW1nT3Blbi5zZXRBdHRyaWJ1dGUoJ2FsdCcsIGltZ0FsdCk7XHJcbiAgICBpbWdPcGVuLmNsYXNzTGlzdC5hZGQoJ2dhbGxlcnktc2VsZWN0ZWRfX2ltZycpO1xyXG5cclxuICAgIGdhbGxlcnlBcmVhU2VsZWN0ZWQuYXBwZW5kQ2hpbGQoaW1nT3Blbik7XHJcblxyXG4gICAgZ2FsbGVyeUFyZWFTZWxlY3RlZC5zdHlsZS50b3AgPSB3aW5kb3cuc2Nyb2xsWSArICdweCc7XHJcbiAgICBnYWxsZXJ5QXJlYVNlbGVjdGVkLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICBnYWxsZXJ5SFRNTC5zdHlsZS5vdmVyZmxvd1kgPSAnaGlkZGVuJztcclxuXHJcblxyXG4gICAgY29uc3QgbmV4dFBob3RvR2FsbGVyeSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgXHJcbiAgICAgICAgbGV0IGkgPSAwO1xyXG4gICAgXHJcbiAgICAgICAgZ2FsbGVyeUFsbEltZy5mb3JFYWNoKGltZyA9PiB7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYoaW1nLmdldEF0dHJpYnV0ZSgnc3JjJykgPT09IGltZ1NyYyl7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoaSA+PSBnYWxsZXJ5QWxsSW1nLmxlbmd0aCAtIDEpe1xyXG4gICAgICAgICAgICAgICAgICAgIGltZ1NyYyA9IGdhbGxlcnlBbGxJbWdbMF0uZ2V0QXR0cmlidXRlKCdzcmMnKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWdBbHQgPSBnYWxsZXJ5QWxsSW1nWzBdLmdldEF0dHJpYnV0ZSgnYWx0Jyk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpbWdPcGVuLnNldEF0dHJpYnV0ZSgnc3JjJywgaW1nU3JjKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWdPcGVuLnNldEF0dHJpYnV0ZSgnYWx0JywgaW1nQWx0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1nU3JjID0gZ2FsbGVyeUFsbEltZ1tpKzFdLmdldEF0dHJpYnV0ZSgnc3JjJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1nQWx0ID0gZ2FsbGVyeUFsbEltZ1tpKzFdLmdldEF0dHJpYnV0ZSgnYWx0Jyk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBpbWdPcGVuLnNldEF0dHJpYnV0ZSgnc3JjJywgaW1nU3JjKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWdPcGVuLnNldEF0dHJpYnV0ZSgnYWx0JywgaW1nQWx0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHByZXZpb3VzUGhvdG9HYWxsZXJ5ID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICBcclxuICAgICAgICBsZXQgaSA9IDA7XHJcbiAgICBcclxuICAgICAgICBnYWxsZXJ5QWxsSW1nLmZvckVhY2goaW1nID0+IHtcclxuICAgIFxyXG4gICAgICAgICAgICBpZihpbWcuZ2V0QXR0cmlidXRlKCdzcmMnKSA9PT0gaW1nU3JjKXtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihpID09IDApe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpbWdTcmMgPSBnYWxsZXJ5QWxsSW1nW2dhbGxlcnlBbGxJbWcubGVuZ3RoLTFdLmdldEF0dHJpYnV0ZSgnc3JjJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1nQWx0ID0gZ2FsbGVyeUFsbEltZ1tnYWxsZXJ5QWxsSW1nLmxlbmd0aC0xXS5nZXRBdHRyaWJ1dGUoJ2FsdCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpbWdPcGVuLnNldEF0dHJpYnV0ZSgnc3JjJywgaW1nU3JjKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWdPcGVuLnNldEF0dHJpYnV0ZSgnYWx0JywgaW1nQWx0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaSA9IC0xMDAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgfWVsc2UgaWYoaSA+IDApe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpbWdTcmMgPSBnYWxsZXJ5QWxsSW1nW2ktMV0uZ2V0QXR0cmlidXRlKCdzcmMnKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWdBbHQgPSBnYWxsZXJ5QWxsSW1nW2ktMV0uZ2V0QXR0cmlidXRlKCdhbHQnKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGltZ09wZW4uc2V0QXR0cmlidXRlKCdzcmMnLCBpbWdTcmMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGltZ09wZW4uc2V0QXR0cmlidXRlKCdhbHQnLCBpbWdBbHQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBpKys7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGdhbGxlcnlCdG5SaWdodC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG5leHRQaG90b0dhbGxlcnkpO1xyXG4gICAgZ2FsbGVyeUJ0bkxlZnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBwcmV2aW91c1Bob3RvR2FsbGVyeSk7XHJcbiAgICBnYWxsZXJ5QnRuQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZUdhbGxlcnlBcmVhKTtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoa2V5KSA9PntcclxuICAgICAgICBpZihrZXkua2V5ID09ICdBcnJvd1JpZ2h0Jyl7XHJcbiAgICAgICAgICAgIG5leHRQaG90b0dhbGxlcnkoKTtcclxuICAgICAgICB9ZWxzZSBpZihrZXkua2V5ID09ICdBcnJvd0xlZnQnKXtcclxuICAgICAgICAgICAgcHJldmlvdXNQaG90b0dhbGxlcnkoKTtcclxuICAgICAgICB9ZWxzZSBpZihrZXkua2V5ID09ICdFc2NhcGUnKXtcclxuICAgICAgICAgICAgY2xvc2VHYWxsZXJ5QXJlYSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5jb25zdCBjbG9zZUdhbGxlcnlBcmVhID0gKCkgPT4ge1xyXG4gICAgZ2FsbGVyeUFyZWFTZWxlY3RlZC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgZ2FsbGVyeUhUTUwuc3R5bGUub3ZlcmZsb3dZID0gJ3Njcm9sbCc7XHJcbiAgICBnYWxsZXJ5QXJlYVNlbGVjdGVkLnJlbW92ZUNoaWxkKGltZ09wZW4pO1xyXG59XHJcblxyXG5oYW5kbGVDdXJyZW50WWVhcigpO1xyXG5cclxuZ2FsbGVyeUFsbEltZy5mb3JFYWNoKGltZyA9PiB7XHJcbiAgICBpbWcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuR2FsbGVyeUFyZWEpO1xyXG59KTtcclxuXHJcbmxvZ29BbGwuZm9yRWFjaChsb2dvID0+IHtcclxuICAgIGxvZ28uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBsb2dvQ2xpY2spO1xyXG59KVxyXG5cclxuYnVyZ2VyQnRuT3Blbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZU1vYmlsZU5hdik7XHJcbmJ1cmdlckJ0bkNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlTW9iaWxlTmF2KTtcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrT3V0c2lkZU5hdik7XHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBOYXZDb2xvckFkZCk7XHJcblxyXG5pZihkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygnbWFpbi1wYWdlJykpe1xyXG5cclxuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKHN0YXJ0Q291bnRlciwgb3B0aW9uc0NvdW50ZXIpOyBcclxuICAgIG9ic2VydmVyLm9ic2VydmUoYm94Q291bnRFbGVtZW50KTtcclxuICAgIFxyXG4gICAgY29uc3Qgb2JzZXJ2ZXIyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKHN0YXJ0QW5pbWF0aW9uQm94LCBvcHRpb25zQWJvdXRVcyk7IFxyXG4gICAgb2JzZXJ2ZXIyLm9ic2VydmUoYm94ZXNBYm91dFVzKTtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgb2JzZXJ2U2VjdGlvbnMpO1xyXG59Il19
